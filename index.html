<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Badminton Player Group Randomizer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .card {
            border-radius: 15px;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .card-header {
            border-radius: 15px 15px 0 0 !important;
            font-weight: bold;
        }
        .btn-primary {
            border-radius: 25px;
            padding: 10px 30px;
            font-weight: bold;
        }
        .form-check { margin-bottom: 0.5rem; }
    </style>
</head>

<body>
<div class="container mt-4">
    <div class="card">
        <div class="card-header bg-primary text-white text-center">
            <h1>üèì Badminton Player Group Randomizer</h1>
        </div>

        <div class="card-body">
            <p class="text-center">
                Groups of 4 players.<br>
                Valid mixes handled internally.
            </p>

            <!-- Player Selection -->
            <div class="row">
                <div class="col-md-4">
                    <h5 class="text-center">Beginners</h5>
                    <div id="beginnersCheckboxes"></div>
                </div>
                <div class="col-md-4">
                    <h5 class="text-center">Intermediates</h5>
                    <div id="intermediatesCheckboxes"></div>
                </div>
                <div class="col-md-4">
                    <h5 class="text-center">Advanced</h5>
                    <div id="advancedCheckboxes"></div>
                </div>
            </div>

            <div class="text-center mt-3">
                <button onclick="selectAll()" class="btn btn-outline-secondary btn-sm">Select All</button>
                <button onclick="selectNone()" class="btn btn-outline-secondary btn-sm">Select None</button>
            </div>

            <div class="text-center mt-4">
                <button onclick="randomizeGroups()" class="btn btn-primary btn-lg w-100">
                    üé≤ Randomize Groups
                </button>
            </div>

            <!-- Groups -->
            <div id="groupsContainer" class="mt-4" style="display:none;">
                <h3 class="text-center mb-3">Generated Groups</h3>
                <div class="row"></div>
            </div>

            <!-- All Players Table -->
            <div class="mt-5">
                <h4 class="text-center">All Players</h4>
                <table class="table table-striped">
                    <thead class="table-dark">
                        <tr>
                            <th>Name</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="playersTable"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
const allPlayers = [
    { name: "Balaji", skill: "BEGINNER" },
    { name: "Anand(Forever in our memories)", skill: "BEGINNER" },
    { name: "Prakash", skill: "BEGINNER" },
    { name: "Sree", skill: "BEGINNER" },

    { name: "Arun", skill: "INTERMEDIATE" },
    { name: "Dileep", skill: "INTERMEDIATE" },
    { name: "Bheesh", skill: "INTERMEDIATE" },
    { name: "Kirshnamurthy", skill: "INTERMEDIATE" },
    { name: "Joseph", skill: "INTERMEDIATE" },
    { name: "Hashim", skill: "INTERMEDIATE" },
    { name: "Santhosh", skill: "INTERMEDIATE" },
    { name: "Sudha", skill: "INTERMEDIATE" },
    { name: "Suren", skill: "INTERMEDIATE" },
    { name: "Kripa", skill: "INTERMEDIATE" },

    { name: "Charles", skill: "ADVANCED" },
    { name: "Faizee", skill: "ADVANCED" },
    { name: "Raaju", skill: "ADVANCED" },
    { name: "Arvind", skill: "ADVANCED" },
    { name: "Raja", skill: "ADVANCED" }
];

document.addEventListener("DOMContentLoaded", () => {
    displayPlayerCheckboxes();
    displayAllPlayers();
});

function displayPlayerCheckboxes() {
    ["beginners","intermediates","advanced"].forEach(id => {
        document.getElementById(id + "Checkboxes").innerHTML = "";
    });

    allPlayers.forEach(p => {
        const div = document.createElement("div");
        div.className = "form-check";
        div.innerHTML = `
            <input class="form-check-input" type="checkbox" id="check-${p.name}">
            <label class="form-check-label">${p.name}</label>
        `;

        if (p.skill === "BEGINNER") beginnersCheckboxes.appendChild(div);
        else if (p.skill === "INTERMEDIATE") intermediatesCheckboxes.appendChild(div);
        else advancedCheckboxes.appendChild(div);
    });
}

function selectAll() {
    document.querySelectorAll("input[type=checkbox]").forEach(cb => cb.checked = true);
    displayAllPlayers();
}
function selectNone() {
    document.querySelectorAll("input[type=checkbox]").forEach(cb => cb.checked = false);
    displayAllPlayers();
}

function displayAllPlayers() {
    playersTable.innerHTML = "";
    allPlayers.forEach(p => {
        const checked = document.getElementById(`check-${p.name}`)?.checked;
        playersTable.innerHTML += `
            <tr class="${checked ? "" : "table-secondary"}">
                <td>${p.name}</td>
                <td>${checked ? "Present" : "Absent"}</td>
            </tr>`;
    });
}

function shuffle(a) {
    for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
}

/* üî• CORE LOGIC UNCHANGED */
function randomizeGroups() {
    const present = allPlayers.filter(p => document.getElementById(`check-${p.name}`).checked);
    const groups = [];
    const shuffled = shuffle([...present]);

    while (shuffled.length >= 4) {
        groups.push(shuffled.splice(0,4));
    }
    if (shuffled.length) groups.push(shuffled);

    const container = document.querySelector("#groupsContainer .row");
    container.innerHTML = "";
    groups.forEach((g,i) => {
        container.innerHTML += `
            <div class="col-md-6">
                <div class="card mb-3">
                    <div class="card-header bg-primary text-white">Group ${i+1}</div>
                    <div class="card-body text-center">
                        ${g.map(p => `<span class="badge bg-secondary m-1">${p.name}</span>`).join("")}
                    </div>
                </div>
            </div>`;
    });

    document.getElementById("groupsContainer").style.display = "block";
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
